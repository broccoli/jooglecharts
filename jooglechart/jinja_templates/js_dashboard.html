        // Create a dashboard.
        var {{ jg.dashboard_name }} = new google.visualization.Dashboard(
            document.getElementById('{{ jg.dashboard_div_id }}'));

        // Create controls
			{% for filter in jg.filters %}
			
			{% if filter._global_name %}
        {{ filter._name }} = new google.visualization.ControlWrapper({
			{% else %}
        var {{ filter._name }} = new google.visualization.ControlWrapper({
			{% endif %}
          'controlType': '{{ filter._type }}',
          'containerId': '{{ filter._div_id }}',
          'options': {{ filter._options|default("{}")|to_json }},
          'state': {{ filter._state|default("{}")|to_json }}
        });
			{% endfor %}

        // Establish dependencies.
			{% for filter in jg.filters %}
        		{% if filter._bind_target %}
		{{ jg.dashboard_name }}.bind({{ filter._name }}, {{ filter._bind_target._name }});
			    {% else %}
			    	{% for chart in jg.charts %}
		{{ jg.dashboard_name }}.bind({{ filter._name }}, {{ chart.name }});
					{% endfor %}
				{% endif %}
			{% endfor %}

		// Add sonar senders, if any
		{% for filter in jg.filters %}
			{% if filter._senders %}
			{% for sender in filter._senders %}
			{% include 'js_filter_sender.html' %}
			{% endfor %}
			{% endif %}
		{% endfor %}

        // Draw the dashboard.
        {{ jg.dashboard_name }}.draw({{ jg.data_name }});
        
        // Add sonar receivers, if any
        {% for filter in jg.filters %}
			{% if filter._receivers %}
			{% for receiver in filter._receivers %}
			{% include 'js_filter_receiver.html' %}
			{% endfor %}
			{% endif %}
        {% endfor %}
